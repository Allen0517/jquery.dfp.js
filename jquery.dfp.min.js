/**
 * jQuery DFP v1.0.16
 * http://github.com/coop182/jquery.dfp.js
 *
 * Copyright 2013 Matt Cooper
 * Released under the MIT license
 */
(function(e,c,t){var p=this,l="",n=0,q=0,d={},k=!1,m,y=function(a,b,c){l=a;m=e(b);u();v(c);e(function(){w();x()})},v=function(a){var b=z();d={setTargeting:{inURL:b.inURL,URLIs:b.URLIs,Query:b.Query,Domain:c.location.host},setCategoryExclusion:"",enableSingleRequest:!0,collapseEmptyDivs:"original",targetPlatform:"web",enableSyncRendering:!1,refreshExisting:!0};e.extend(!0,d,a);d.googletag&&c.googletag.cmd.push(function(){e.extend(!0,c.googletag,d.googletag)})},w=function(){m.each(function(){var a=
e(this);n++;var b=a.data("adunit")||a.attr("id"),h=a.attr("id")||a.attr("id",b+"-auto-gen-id-"+n).attr("id"),B=A(a),r=a.html();a.html("").addClass("display-none");c.googletag.cmd.push(function(){var f,g=a.data("googleAdUnit");f=g?g:a.data("outofpage")?c.googletag.defineOutOfPageSlot("/"+l+"/"+b,h).addService(c.googletag.pubads()):c.googletag.defineSlot("/"+l+"/"+b,B,h).addService(c.googletag.pubads());(g=a.data("targeting"))&&e.each(g,function(a,b){f.setTargeting(a,b)});if(g=a.data("exclusions")){var g=
g.split(","),k;e.each(g,function(a,b){k=e.trim(b);0<k.length&&f.setCategoryExclusion(k)})}f.oldRenderEnded=f.oldRenderEnded||f.renderEnded;f.renderEnded=function(){q++;var b=a.css("display");"none"===b&&(0<e.trim(r).length&&"original"===d.collapseEmptyDivs)&&(a.show().html(r),b="block display-original");a.removeClass("display-none").addClass("display-"+b);f.oldRenderEnded();"function"===typeof d.afterEachAdLoaded&&d.afterEachAdLoaded.call(this,a);"function"===typeof d.afterAllAdsLoaded&&q===n&&d.afterAllAdsLoaded.call(this,
m)};a.data("googleAdUnit",f)})});c.googletag.cmd.push(function(){!0===d.enableSingleRequest&&c.googletag.pubads().enableSingleRequest();e.each(d.setTargeting,function(a,b){c.googletag.pubads().setTargeting(a,b)});if(0<d.setCategoryExclusion.length){var a=d.setCategoryExclusion.split(","),b;e.each(a,function(a,d){b=e.trim(d);0<b.length&&c.googletag.pubads().setCategoryExclusion(b)})}!0!==d.collapseEmptyDivs&&"original"!==d.collapseEmptyDivs||c.googletag.pubads().collapseEmptyDivs();c.googletag.enableServices()})},
x=function(){m.each(function(){var a=e(this),b=a.data("googleAdUnit");d.refreshExisting&&b&&a.hasClass("display-block")?c.googletag.cmd.push(function(){c.googletag.pubads().refresh([b])}):c.googletag.cmd.push(function(){c.googletag.display(a.attr("id"))})})},z=function(){var a=c.location.pathname.replace(/\/$/,""),b=a.match(RegExp("/([^/]*)","ig")),h=["/"],e="";if(b&&"/"!==a){var a="",d=b.length;if(0<d)for(var f=0;f<d;f++){a=b[f];h.push(a);for(var g=f+1;g<d;g++)a+=b[g],h.push(a);0===f&&(h.splice(-1,
1),e=a)}h.push(e)}h=h.reverse();c.location.toString().replace(/\=/ig,":").match(/\?(.+)$/);b=RegExp.$1.split("&");return{inURL:h,URLIs:h[0],Query:b}},A=function(a){var b=[],c=a.data("dimensions");c?(a=c.split(","),e.each(a,function(a,c){var d=c.split("x");b.push([parseInt(d[0],10),parseInt(d[1],10)])})):b.push([a.width(),a.height()]);return b},u=function(){k=k||e('script[src*="googletagservices.com/tag/js/gpt.js"]').length;if(!k){c.googletag=c.googletag||{};c.googletag.cmd=c.googletag.cmd||[];var a=
document.createElement("script");a.async=!0;a.type="text/javascript";a.onerror=function(){s()};a.src=("https:"===document.location.protocol?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);"none"===a.style.display&&s()}},s=function(){var a=c.googletag.cmd;setTimeout(function(){c.googletag={cmd:{push:function(a){a.call(p)}},ads:[],pubads:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},
collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(a,d,e){c.googletag.ads.push(e);c.googletag.ads[e]={renderEnded:function(){},addService:function(){return this}};return c.googletag.ads[e]},defineOutOfPageSlot:function(a,d){c.googletag.ads.push(d);c.googletag.ads[d]={renderEnded:function(){},addService:function(){return this}};return c.googletag.ads[d]},display:function(a){c.googletag.ads[a].renderEnded.call(p);return this}};e.each(a,function(a,d){c.googletag.cmd.push(d)})},
50)};e.dfp=e.fn.dfp=function(a,b){b=b||{};a===t&&(a=l);"object"===typeof a&&(b=a,a=b.dfpID||l);var c=this;"function"===typeof this&&(c=".adunit");y(a,c,b);return this}})(window.jQuery||window.Zepto||window.tire,window);
