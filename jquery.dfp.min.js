/**
 * jQuery DFP v1.0.15
 * http://github.com/coop182/jquery.dfp.js
 *
 * Copyright 2013 Matt Cooper
 * Released under the MIT license
 */
(function(d,c,t){var p=this,l="",n=0,q=0,e={},k=!1,m,y=function(a,b,c){l=a;m=d(b);u();v(c);d(function(){w();x()})},v=function(a){var b=z();e={setTargeting:{inURL:b.inURL,URLIs:b.URLIs,Query:b.Query,Domain:c.location.host},setCategoryExclusion:"",enableSingleRequest:!0,collapseEmptyDivs:"original",targetPlatform:"web",enableSyncRendering:!1,refreshExisting:!0};d.extend(!0,e,a);e.googletag&&c.googletag.cmd.push(function(){d.extend(c.googletag,e.googletag)})},w=function(){m.each(function(){var a=d(this);
n++;var b=a.data("adunit")||a.attr("id"),h=a.attr("id")||a.attr("id",b+"-auto-gen-id-"+n).attr("id"),B=A(a),r=a.html();a.html("").addClass("display-none");c.googletag.cmd.push(function(){var f,g=a.data("googleAdUnit");f=g?g:a.data("outofpage")?c.googletag.defineOutOfPageSlot("/"+l+"/"+b,h).addService(c.googletag.pubads()):c.googletag.defineSlot("/"+l+"/"+b,B,h).addService(c.googletag.pubads());(g=a.data("targeting"))&&d.each(g,function(a,b){f.setTargeting(a,b)});if(g=a.data("exclusions")){var g=g.split(","),
k;d.each(g,function(a,b){k=b.trim();0<k.length&&f.setCategoryExclusion(b.trim())})}f.oldRenderEnded=f.oldRenderEnded||f.renderEnded;f.renderEnded=function(){q++;var b=a.css("display");"none"===b&&(0<d.trim(r).length&&"original"===e.collapseEmptyDivs)&&(a.show().html(r),b="block display-original");a.removeClass("display-none").addClass("display-"+b);f.oldRenderEnded();"function"===typeof e.afterEachAdLoaded&&e.afterEachAdLoaded.call(this,a);"function"===typeof e.afterAllAdsLoaded&&q===n&&e.afterAllAdsLoaded.call(this,
m)};a.data("googleAdUnit",f)})});c.googletag.cmd.push(function(){!0===e.enableSingleRequest&&c.googletag.pubads().enableSingleRequest();d.each(e.setTargeting,function(a,b){c.googletag.pubads().setTargeting(a,b)});if(0<e.setCategoryExclusion.length){var a=e.setCategoryExclusion.split(","),b;d.each(a,function(a,d){b=d.trim();0<b.length&&c.googletag.pubads().setCategoryExclusion(d.trim())})}!0!==e.collapseEmptyDivs&&"original"!==e.collapseEmptyDivs||c.googletag.pubads().collapseEmptyDivs();c.googletag.enableServices()})},
x=function(){m.each(function(){var a=d(this),b=a.data("googleAdUnit");e.refreshExisting&&b&&a.hasClass("display-block")?c.googletag.cmd.push(function(){c.googletag.pubads().refresh([b])}):c.googletag.cmd.push(function(){c.googletag.display(a.attr("id"))})})},z=function(){var a=c.location.pathname.replace(/\/$/,""),b=a.match(RegExp("/([^/]*)","ig")),h=["/"],d="";if(b&&"/"!==a){var a="",e=b.length;if(0<e)for(var f=0;f<e;f++){a=b[f];h.push(a);for(var g=f+1;g<e;g++)a+=b[g],h.push(a);0===f&&(h.splice(-1,
1),d=a)}h.push(d)}h=h.reverse();c.location.toString().replace(/\=/ig,":").match(/\?(.+)$/);b=RegExp.$1.split("&");return{inURL:h,URLIs:h[0],Query:b}},A=function(a){var b=[],c=a.data("dimensions");c?(a=c.split(","),d.each(a,function(a,c){var d=c.split("x");b.push([parseInt(d[0],10),parseInt(d[1],10)])})):b.push([a.width(),a.height()]);return b},u=function(){k=k||d('script[src*="googletagservices.com/tag/js/gpt.js"]').length;if(!k){c.googletag=c.googletag||{};c.googletag.cmd=c.googletag.cmd||[];var a=
document.createElement("script");a.async=!0;a.type="text/javascript";a.onerror=function(){s()};a.src=("https:"===document.location.protocol?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var b=document.getElementsByTagName("script")[0];b.parentNode.insertBefore(a,b);"none"===a.style.display&&s()}},s=function(){var a=c.googletag.cmd;setTimeout(function(){c.googletag={cmd:{push:function(a){a.call(p)}},ads:[],pubads:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},
collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(a,d,e){c.googletag.ads.push(e);c.googletag.ads[e]={renderEnded:function(){},addService:function(){return this}};return c.googletag.ads[e]},defineOutOfPageSlot:function(a,d){c.googletag.ads.push(d);c.googletag.ads[d]={renderEnded:function(){},addService:function(){return this}};return c.googletag.ads[d]},display:function(a){c.googletag.ads[a].renderEnded.call(p);return this}};d.each(a,function(a,d){c.googletag.cmd.push(d)})},
50)};d.dfp=d.fn.dfp=function(a,b){b=b||{};a===t&&(a=l);"object"===typeof a&&(b=a,a=b.dfpID||l);var c=this;"function"===typeof this&&(c=".adunit");y(a,c,b);return this}})(window.jQuery||window.Zepto||window.tire,window);
