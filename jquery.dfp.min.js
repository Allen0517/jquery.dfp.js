/**
 * jQuery DFP v1.0.14
 * http://github.com/coop182/jquery.dfp.js
 *
 * Copyright 2013 Matt Cooper
 * Released under the MIT license
 */
(function(d,b,t){var p=this,k="",m=0,q=0,f={},n=!1,l,y=function(a,c,b){k=a;l=d(c);u();v(b);d(function(){w();x()})},v=function(a){var c=z();f={setTargeting:{inURL:c.inURL,URLIs:c.URLIs,Query:c.Query,Domain:b.location.host},enableSingleRequest:!0,collapseEmptyDivs:"original",targetPlatform:"web",enableSyncRendering:!1,refreshExisting:!0};d.extend(!0,f,a);f.googletag&&b.googletag.cmd.push(function(){d.extend(b.googletag,f.googletag)})},w=function(){l.each(function(){var a=d(this);m++;var c=a.data("adunit")||
a.attr("id"),e=a.attr("id")||a.attr("id",c+"-auto-gen-id-"+m).attr("id"),B=A(a),r=a.html();a.html("").addClass("display-none");b.googletag.cmd.push(function(){var g,h=a.data("googleAdUnit");g=h?h:a.data("outofpage")?b.googletag.defineOutOfPageSlot("/"+k+"/"+c,e).addService(b.googletag.pubads()):b.googletag.defineSlot("/"+k+"/"+c,B,e).addService(b.googletag.pubads());(h=a.data("targeting"))&&d.each(h,function(a,c){g.setTargeting(a,c)});if(h=a.data("exclusions"))h=h.split(","),d.each(h,function(a,c){g.setCategoryExclusion(c.trim())});
g.oldRenderEnded=g.oldRenderEnded||g.renderEnded;g.renderEnded=function(){q++;var c=a.css("display");"none"===c&&(0<d.trim(r).length&&"original"===f.collapseEmptyDivs)&&(a.show().html(r),c="block display-original");a.removeClass("display-none").addClass("display-"+c);g.oldRenderEnded();"function"===typeof f.afterEachAdLoaded&&f.afterEachAdLoaded.call(this,a);"function"===typeof f.afterAllAdsLoaded&&q===m&&f.afterAllAdsLoaded.call(this,l)};a.data("googleAdUnit",g)})});b.googletag.cmd.push(function(){!0===
f.enableSingleRequest&&b.googletag.pubads().enableSingleRequest();d.each(f.setTargeting,function(a,c){b.googletag.pubads().setTargeting(a,c)});!0!==f.collapseEmptyDivs&&"original"!==f.collapseEmptyDivs||b.googletag.pubads().collapseEmptyDivs();b.googletag.enableServices()})},x=function(){l.each(function(){var a=d(this),c=a.data("googleAdUnit");f.refreshExisting&&c&&a.hasClass("display-block")?b.googletag.cmd.push(function(){b.googletag.pubads().refresh([c])}):b.googletag.cmd.push(function(){b.googletag.display(a.attr("id"))})})},
z=function(){var a=b.location.pathname.replace(/\/$/,""),c=a.match(RegExp("/([^/]*)","ig")),e=["/"],d="";if(c&&"/"!==a){var a="",f=c.length;if(0<f)for(var g=0;g<f;g++){a=c[g];e.push(a);for(var h=g+1;h<f;h++)a+=c[h],e.push(a);0===g&&(e.splice(-1,1),d=a)}e.push(d)}e=e.reverse();b.location.toString().replace(/\=/ig,":").match(/\?(.+)$/);c=RegExp.$1.split("&");return{inURL:e,URLIs:e[0],Query:c}},A=function(a){var c=[],b=a.data("dimensions");b?(a=b.split(","),d.each(a,function(a,b){var e=b.split("x");
c.push([parseInt(e[0],10),parseInt(e[1],10)])})):c.push([a.width(),a.height()]);return c},u=function(){n=n||d('script[src*="googletagservices.com/tag/js/gpt.js"]').length;if(!n){b.googletag=b.googletag||{};b.googletag.cmd=b.googletag.cmd||[];var a=document.createElement("script");a.async=!0;a.type="text/javascript";a.onerror=function(){s()};a.src=("https:"===document.location.protocol?"https:":"http:")+"//www.googletagservices.com/tag/js/gpt.js";var c=document.getElementsByTagName("script")[0];c.parentNode.insertBefore(a,
c);"none"===a.style.display&&s()}},s=function(){var a=b.googletag.cmd;setTimeout(function(){b.googletag={cmd:{push:function(a){a.call(p)}},ads:[],pubads:function(){return this},enableSingleRequest:function(){return this},setTargeting:function(){return this},collapseEmptyDivs:function(){return this},enableServices:function(){return this},defineSlot:function(a,e,d){b.googletag.ads.push(d);b.googletag.ads[d]={renderEnded:function(){},addService:function(){return this}};return b.googletag.ads[d]},defineOutOfPageSlot:function(a,
e){b.googletag.ads.push(e);b.googletag.ads[e]={renderEnded:function(){},addService:function(){return this}};return b.googletag.ads[e]},display:function(a){b.googletag.ads[a].renderEnded.call(p);return this}};d.each(a,function(a,e){b.googletag.cmd.push(e)})},50)};d.dfp=d.fn.dfp=function(a,c){c=c||{};a===t&&(a=k);"object"===typeof a&&(c=a,a=c.dfpID||k);var b=this;"function"===typeof this&&(b=".adunit");y(a,b,c);return this}})(window.jQuery||window.Zepto||window.tire,window);
